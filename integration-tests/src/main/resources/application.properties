# Quarkus Apicurio Registry Protobuf Integration Test
#
# This extension auto-configures Kafka serializer/deserializer for Protobuf messages:
#   - value.serializer = ProtobufKafkaSerializer
#   - value.deserializer = ProtobufKafkaDeserializer
#   - apicurio.protobuf.derive.class = true
#   - apicurio.registry.auto-register = true
#
# Requirements:
#   1. Use standard @Incoming/@Outgoing/@Channel annotations with Protobuf message types
#   2. Specify connector=smallrye-kafka for each channel (required for DevServices)
#
# The extension auto-detects Protobuf types at build time and injects the config.

# Reduce log noise
quarkus.log.category."kafka".level=WARN
quarkus.log.category."org.apache.kafka".level=WARN
quarkus.log.category."io.apicurio".level=INFO

# DevServices for Apicurio Registry (provided by our extension)
quarkus.apicurio-registry.protobuf.devservices.enabled=true

# Connector config (required for DevServices to detect channels)
mp.messaging.outgoing.test-out.connector=smallrye-kafka
mp.messaging.incoming.test-in.connector=smallrye-kafka

# Topic names
mp.messaging.outgoing.test-out.topic=test-protobuf-topic
mp.messaging.incoming.test-in.topic=test-protobuf-topic

# For testing: ignore failures so we see messages even if there are issues
mp.messaging.incoming.test-in.failure-strategy=ignore

# Mutiny-based channels (demonstrates reactive Multi/Uni patterns)
mp.messaging.outgoing.mutiny-out.connector=smallrye-kafka
mp.messaging.incoming.mutiny-in.connector=smallrye-kafka
mp.messaging.outgoing.mutiny-out.topic=mutiny-protobuf-topic
mp.messaging.incoming.mutiny-in.topic=mutiny-protobuf-topic
mp.messaging.incoming.mutiny-in.failure-strategy=ignore

# UUID key channels (demonstrates explicit UUID key handling)
mp.messaging.outgoing.uuid-key-out.connector=smallrye-kafka
mp.messaging.incoming.uuid-key-in.connector=smallrye-kafka
mp.messaging.outgoing.uuid-key-out.topic=uuid-key-protobuf-topic
mp.messaging.incoming.uuid-key-in.topic=uuid-key-protobuf-topic
mp.messaging.incoming.uuid-key-in.failure-strategy=ignore
